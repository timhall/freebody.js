!function(){!function(a,b){var c="underscore";"object"==typeof exports?module.exports=b(require(c)):"function"==typeof define&&define.amd?define("freebody",[c],b):a.freebody=b(a._)}(this,function(a){"use strict";var b={},c=b.utils={};c.radians=function(a){return a*(Math.PI/180)},c.degrees=function(a){return a*(180/Math.PI)},c.hypotenuse=function(a,b){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2))},c.roundToDec=function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},c.roundToPrecision=function(a,b){var d=Math.round(c.log10(1/(b||1)));return c.roundToDec(a,d)},c.log10=function(a){return Math.log(a)/Math.LN10},c.distance=function(a,b){return c.hypotenuse(a.x-b.x,a.y-b.y)},c.angle=function(a,b){return c.degrees(Math.atan2(b.y-a.y,b.x-a.x))};var d=b.Vector=function(a,b){return this._magnitude=a||0,this._angle=b||0,this};d.prototype.magnitude=function(a){return void 0!==a?(this._magnitude=a,this):this._magnitude},d.prototype.angle=function(a){return void 0!==a?(this._angle=a,this):this._angle},d.prototype.x=function(a){return void 0!==a?(e(this,a,this.y()),this):this._magnitude*Math.cos(c.radians(this._angle))},d.prototype.y=function(a){return void 0!==a?(e(this,this.x(),a),this):this._magnitude*Math.sin(c.radians(this._angle))};var e=function(a,b,d){a._magnitude=c.hypotenuse(b,d),a._angle=c.degrees(Math.atan2(d,b))},f=b.Body=function(b){return a.extend(this,a.defaults({},b,{mass:0,x:0,y:0,v:new d,a:new d,forces:[],lifetime:0})),this};f.options={timestep:8,maxAdvanceTime:3e4},f.prototype.advance=function(a,b){var c,d=this,e=0;if(void 0===b&&(b=d.isVariable()?a/Math.ceil(a/f.options.timestep):a),b>0)for(c=g(a);!c(d,e)&&e<f.options.maxAdvanceTime;)e+=b,d.move(b);return d},f.prototype.move=function(a){var b=this,c=b.v.x(),d=b.v.y(),e=b.netForce();return b.lifetime+=a,a/=1e3,a>0&&(b.x=b.x+c*a,b.y=b.y+d*a,b.mass>0&&(b.a.x(e.x()/b.mass),b.a.y(e.y()/b.mass)),b.v.x(b.v.x()+b.a.x()*a),b.v.y(b.v.y()+b.a.y()*a)),b},f.prototype.isVariable=function(){return!!a.any(this.forces,a.isFunction)},f.prototype.netForce=function(){for(var b,c=this,e=0,f=0,g=0,h=c.forces.length;h>g;g+=1)b=a.isFunction(c.forces[g])?c.forces[g](c):c.forces[g],e+=b.x(),f+=b.y();return this._netForce=this._netForce||new d,this._netForce.x(e).y(f)},f.prototype.path=function(a,b){var c,d=this.clone(),e=0,h=[];if(b=b||f.options.timestep,b>0)for(c=g(a);!c(d,e)&&e<f.options.maxAdvanceTime;)e+=b,d.move(b),h.push({x:d.x,y:d.y,t:e});return h},f.prototype.clone=function(){var a=this,c=new f({mass:a.mass,x:a.x,y:a.y});return c.v=new b.Vector(a.v.magnitude(),a.v.angle()),c.a=new b.Vector(a.a.magnitude(),a.a.angle()),c.forces=a.forces,c};var g=function(a){return function(b,c){return c>=a}},h=b.gravity={},i=6.6e-11,j=9.8;return h.simple=function(a,b){var c=(new d).angle(-90);b=b||j;var e=function(a){return c.magnitude(b*a.mass),c};a.forces.push(e)},h.planetary=function(a,b,e){var f=i*b.mass,g=new d;e=e||2;var h=function(a){return g.magnitude(f/Math.pow(c.distance(a,b),e)*a.mass),g.angle(c.angle(a,b)),g};a.forces.push(h)},b}),define("app",["freebody"],function(){"use strict"}),require.config({paths:{jquery:"../bower_components/jquery/jquery",underscore:"../bower_components/lodash/lodash"},shim:{underscore:{exports:"_"}}}),require(["app"],function(){"use strict"}),define("main",function(){})}();